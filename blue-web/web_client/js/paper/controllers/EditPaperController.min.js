angular.module('bluelatex.Paper.Controllers.EditPaper',['bluelatex.Paper.Services.Paper']).controller('EditPaperController',['$scope','localize','$location','PaperService','$routeParams','$log',function(b,c,d,e,f,g){var h=f.id;var i={};e.getInfo(h).then(function(a){b.paper=a;b.paper.etag=a.header.etag;b.paper.id=h;i=clone(b.paper)},function(a){b.errors=[];switch(a.status){case 400:b.errors.push(c.getLocalizedString('_Edit_paper_Some_parameters_are_missing_'));break;case 401:b.errors.push(c.getLocalizedString('_Edit_paper_Wrong_username_and_or_password_'));break;case 500:b.errors.push(c.getLocalizedString('_Edit_paper_Something_wrong_happened_'));break;default:b.errors.push(c.getLocalizedString('_Edit_paper_Something_wrong_happened_'));g.error(a)}});b.new_author='';b.new_reviewer='';b.new_tag='';b.removeAuthor=function(a){b.paper.authors.splice(b.paper.authors.indexOf(a),1)};b.removeReviewer=function(a){b.paper.reviewers.splice(b.paper.reviewers.indexOf(a),1)};b.removeTag=function(a){b.paper.tags.splice(b.paper.tags.indexOf(a),1)};b.addAuthor=function(){var a=b.new_author;if(b.paper.authors.indexOf(a)<0)b.paper.authors.push(a);b.new_author=''};b.addReviewer=function(){var a=b.new_reviewer;if(b.paper.reviewers.indexOf(a)<0)b.paper.reviewers.push(a);b.new_reviewer=''};b.addTag=function(){var a=b.new_tag;if(b.paper.tags.indexOf(a)<0)b.paper.tags.push(a);b.new_tag=''};b.modify=function(){e.modify(b.paper,i).then(function(a){g.log(a);d.path("/papers")},function(a){g.error(a)})}}]);