'use strict';angular.module('bluelatex',['localization','ngRoute','bluelatex.Shared.Services.Configuration','bluelatex.Shared.Services.WindowActive','bluelatex.Paper.Controllers.EditPaper','bluelatex.Paper.Controllers.NewPaper','bluelatex.Paper.Controllers.Paper','bluelatex.Paper.Controllers.Papers','bluelatex.Shared.Controllers.Main','bluelatex.Shared.Controllers.Menu','bluelatex.Shared.Directives.Menu','bluelatex.Shared.Directives.Messages','bluelatex.Shared.Controllers.Messages','bluelatex.User.Controllers.Login','bluelatex.User.Controllers.Logout','bluelatex.User.Controllers.Profile','bluelatex.User.Controllers.Register','bluelatex.User.Controllers.ResetPassword']).config(['$routeProvider',function(a){a.when('/login',{templateUrl:'partials/login.html',controller:'LoginController',options:{name:'login',connected:false,unconnected:true,title:'Login'}});a.when('/logout',{templateUrl:'partials/logout.html',controller:'LogoutController',options:{name:'logout',connected:true,unconnected:false,title:'Logout'}});a.when('/register',{templateUrl:'partials/register.html',controller:'RegisterController',options:{name:'register',connected:false,unconnected:true,title:'Register'}});a.when('/reset/?',{templateUrl:'partials/reset.html',controller:'ResetPasswordController',options:{name:'reset',connected:false,unconnected:true,title:'Login'}});a.when('/:username/reset/:token/?',{templateUrl:'partials/resetPassword.html',controller:'ResetPasswordController',options:{name:'resetPassword',connected:false,unconnected:true,title:'Rset password'}});a.when('/profile',{templateUrl:'partials/profile.html',controller:'ProfileController',options:{name:'profile',connected:true,unconnected:false,title:'Profile'}});a.when('/papers',{templateUrl:'partials/papers.html',controller:'PapersController',options:{name:'papers',connected:true,unconnected:false,title:'Papers'}});a.when('/paper/new',{templateUrl:'partials/new_paper.html',controller:'NewPaperController',options:{name:'new_paper',connected:true,unconnected:false,title:'New paper'}});a.when('/paper/:id/edit',{templateUrl:'partials/edit_paper.html',controller:'EditPaperController',options:{name:'edit_paper',connected:true,unconnected:false,title:'Edit paper'}});a.when('/paper/:id/?',{templateUrl:'partials/paper.html',controller:'PaperController',options:{name:'paper',connected:true,unconnected:false,title:'Paper'}});a.when('/404/?',{templateUrl:'partials/404.html',options:{name:'new_paper',connected:true,unconnected:true,title:'404'}});a.when('/',{redirectTo:'/papers',options:{}});a.otherwise({redirectTo:'/404',options:{}})}]).run(['$rootScope','$location','$route','$window','$log','WindowActiveService',function(d,e,f,g,h,i){d.loggedUser={};var j=null;d.$watch('loggedUser',function(a){if(d.loggedUser.name==null&&f.current!=null&&!f.current.$$route.options.unconnected){if(f.current.$$route.options.name=="login"){}else{j=e.path();e.path("/login")}}else if(f.current!=null&&f.current.$$route.options.connected==false&&d.loggedUser.name!=null){if(j!=null&&j!='/login'){e.path(j)}else{e.path("/")}}});d.$on("$routeChangeStart",function(a,b,c){if(d.loggedUser.name==null&&b.$$route!=null&&!b.$$route.options.unconnected){if(b.$$route.options.name=="login"){}else{j=e.path();e.path("/login")}}else if(b.$$route!=null&&b.$$route.options.connected==false&&d.loggedUser.name!=null){if(j!=null&&j!='/login'){e.path(j)}else{e.path("/")}}})}]);