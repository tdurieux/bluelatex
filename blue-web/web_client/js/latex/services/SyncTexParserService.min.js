angular.module("bluelatex.Latex.Services.SyncTexParser",[]).factory("SyncTexParserService",['$log','$q','$http',function(G,H,I){var J=65781.76;var K=function(a){var b=0;var c={};var d={};var e={};var f={};var g=[];var h={};var j={};var k={};var l=a.split("\n");k.version=l[0].replace('SyncTeX Version:','');var m=/Input:([0-9]+):(.+)/;var n=/(X|Y) Offset:([0-9]+)/;var o=/\{([0-9]+)/;var p=/\}([0-9]+)/;var q=/\[([0-9]+),([0-9]+):([0-9]+),([0-9]+):([0-9]+),([0-9]+),([0-9]+)/;var r=/\]/;var s=/\(([0-9]+),([0-9]+):([0-9]+),([0-9]+):([0-9]+),([0-9]+),([0-9]+)/;var t=/\)/;var u=/(.)([0-9]+),([0-9]+):([0-9]+),([0-9]+)(:?([0-9]+))?/;for(var i=1;i<l.length;i++){var v=l[i];match=v.match(m);if(match){h[match[1]]=match[2];continue}match=v.match(n);if(match){k['offset'+match[1]]=match[2];continue}match=v.match(o);if(match){c={page:match[1],blocks:[],type:'page'};if(c.page>b){b=c.page}d=c;continue}match=v.match(p);if(match){j[match[1]]=c;c=null;continue}match=v.match(q);if(match){var w=[match[3]/J,match[4]/J];var x=[match[5]/J,match[6]/J];var y={type:'vertical',parent:d,fileNumber:parseInt(match[1]),file:h[match[1]],line:parseInt(match[2]),left:w[0],bottom:w[1],width:x[0],height:x[1],depth:parseInt(match[7]),blocks:[],elements:[],page:c.page};d=y;continue}match=v.match(r);if(match){d.parent.blocks.push(d);d=d.parent;continue}match=v.match(s);if(match){var w=[match[3]/J,match[4]/J];var x=[match[5]/J,match[6]/J];var y={type:'horizontal',parent:d,fileNumber:parseInt(match[1]),file:h[match[1]],line:parseInt(match[2]),left:w[0],bottom:w[1],width:x[0],height:x[1],blocks:[],elements:[],page:c.page};g.push(y);d=y;continue}match=v.match(t);if(match){d.parent.blocks.push(d);d=d.parent;continue}match=v.match(u);if(match){var z=match[1];var A=parseInt(match[2]);var B=parseInt(match[3]);var C=match[4]/J;var D=match[5]/J;var E=(match[7])?match[7]/J:null;var F={type:z,parent:d,fileNumber:A,file:h[A],line:B,left:C,bottom:D,height:d.height,width:E,page:c.page};if(f[B]==null){f[B]=[]}f[B].push(F);d.elements.push(F);continue}}k.files=h;k.pages=j;k.blockNumberLine=f;k.hBlocks=g;k.numberPages=b;return k};return{parse:K}}]);